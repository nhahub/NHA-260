@model Travely.Models.TblRoom

@{
    ViewData["Title"] = Model.RoomType;

    string imageUrl = "/images/placeholder.png";
    if (Model.TblRoomImages != null && Model.TblRoomImages.Any())
    {
        imageUrl = Model.TblRoomImages.First().ImageUrl;
    }
}

<main class="main">

    <section id="room-details" class="room-details section">

        <div class="container" data-aos="fade-up" data-aos-delay="100">

            <div class="row align-items-center mb-5">
                <div class="col-lg-7" data-aos="fade-right" data-aos-delay="200">
                    <div class="room-header-image">
                        <img src=@imageUrl alt="@Model.RoomType" class="img-fluid rounded">
                    </div>
                </div>
                <div class="col-lg-5" data-aos="fade-left" data-aos-delay="300">
                    <div class="room-header-content">
                        <h1 class="room-title">@Model.RoomType "@Model.RoomNumber"</h1>

                        <p class="room-tagline"> lovely room at @Model.Hotel.Name</p>

                        <div class="room-capacity mb-4">
                            <div class="capacity-item">
                                <i class="bi bi-people"></i>
                                <span>Up to @Model.MaxGuests guests</span>
                            </div>
                            <div class="capacity-item">
                                <i class="bi bi-bed"></i>
                                <span>@Model.BedsCount Bed(s)</span>
                            </div>
                        </div>

                        <div class="room-price">
                            @if (Model.Available == true)
                            {
                                <span class="price-amount">@Model.Price</span>
                                <span class="price-period">per night</span>
                            }
                            else
                            {
                                <p>This Room is Not Availabale Right Now</p>
                            }
                        </div>

                        @if (Model.Available == true)
                        {
                            <a asp-controller="TblBookings" asp-action="Confirm" asp-route-roomId="@Model.RoomId" class="ColorBtn btn-lg">Book Now</a>
                        }
                        else
                        {
                            
                            <a asp-area="" asp-controller="Rooms" asp-action="Index" class="ColorBtn btn-lg">Explore other Rooms</a>
                            
                        }
                        @if (User.IsInRole("admin") || User.IsInRole("staff"))
                        {
                                <a asp-action="Edit" asp-route-id="@Model.RoomId" class="ColorBtn">Edit</a>
                        }
                    </div>
                </div>
            </div>

            <div class="room-gallery mb-5" data-aos="fade-up" data-aos-delay="200">
                <h3 class="section-subtitle mb-4">Room Gallery</h3>

                <div class="gallery-grid">
                    @if (Model.TblRoomImages != null && Model.TblRoomImages.Any())
                    {
                        <div class="gallery-main">
                            <a href="@Model.TblRoomImages.First().ImageUrl" class="glightbox">
                                <img src="@Model.TblRoomImages.First().ImageUrl" alt="@Model.RoomType" class="img-fluid">
                            </a>
                        </div>
                        <div class="gallery-thumbnails">
                            @foreach (var image in Model.TblRoomImages.Skip(1))
                            {
                                <a href="@image.ImageUrl" class="glightbox">
                                    <img src="@image.ImageUrl" alt="Room thumbnail" class="img-fluid">
                                </a>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="gallery-main">
                            <img src="/images/placeholder.png" alt="No images available" class="img-fluid">
                        </div>
                    }
                </div>
            </div>

            <div class="row mb-5">
                <div class="col-lg-8" data-aos="fade-up" data-aos-delay="200">
                    <div class="room-description">
                        <h3 class="section-subtitle">Room Overview</h3>
                        <p>@Html.Raw(Model.Description.Replace("\n", "<br>"))</p>
                    </div>
                </div>
            </div>

            <div class="room-tabs mb-5" data-aos="fade-up" data-aos-delay="200">
                <ul class="nav nav-tabs" id="room-detailsRoomTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="room-details-policies-tab" data-bs-toggle="tab" data-bs-target="#room-details-policies" role="list">Policies</button>
                    </li>
                </ul>
                <div class="tab-content" id="room-detailsRoomTabsContent">
                    <div class="tab-pane fade show active" id="room-details-policies" role="tabpanel">
                        <div class="tab-content-wrapper">
                            <div class="row">
                                <div class="col-md-4">
                                    <h6>Availability </h6>
                                    <p>Status : <strong>@Model.Available</strong> </p>
                                </div>
                                <div class="col-md-4">
                                    <h6>Pets</h6>
                                    <p class="badge @(Model.PetsAllowed ? "bg-success" : "bg-danger")">
                                        @(Model.PetsAllowed ? "Pets Allowed" : "Pets Not Allowed")
                                    </p>
                                </div>
                                <div class="col-md-4">
                                    <h6>Breakfast</h6>
                                    <p class="badge @(Model.BreakfastIncluded ? "bg-success" : "bg-secondary")">
                                        @(Model.BreakfastIncluded ? "Included" : "Not Included")
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="booking-cta" data-aos="fade-up" data-aos-delay="200">
                <div class="booking-card">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <h4>Ready to book your stay?</h4>
                            <p>Indulge in the perfect blend of luxury, comfort, and breathtaking views in our Deluxe Ocean View Suite. 
                                Wake up to the sound of the waves, relax in elegant surroundings, and enjoy every moment of your stay. 
                                Book now to experience an unforgettable escape filled with serenity, sophistication, and lasting memories. </p>
                        </div>
                        <div class="col-lg-4 text-center text-lg-end">
                            <div class="price-display">

                                @if (Model.Available == true)
                                {
                                    <span class="price">@Model.Price</span>
                                    <span class="period">per night</span>
                                }
                                else
                                {
                                    <p>This Room is Not Availabale Right Now</p>
                                }
                            </div>
                            @if (Model.Available == true)
                            {
                                <a asp-controller="TblBookings" asp-action="Confirm" asp-route-roomId="@Model.RoomId" class="ColorBtn btn-lg">Book Now</a>
                            }
                            else
                            {
                                <a asp-area="" asp-controller="Rooms" asp-action="Index" class="btn btn-primary btn-lg">Explore other Rooms</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>

</main>